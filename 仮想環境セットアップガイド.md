# ISOP - 仮想環境セットアップガイド

## 概要

このガイドでは、ISOPを仮想環境で実行するためのセットアップ手順を説明します。仮想環境を使用することで、ライブラリの不整合を避け、安定した環境でアプリケーションを実行できます。

## 前提条件

- Python 3.11以上がインストールされていること
- 管理者権限でコマンドプロンプト/ターミナルを実行できること

## セットアップ手順

### Windows環境

#### 1. 初回セットアップ

1. コマンドプロンプトを管理者として実行
2. ISOPのフォルダに移動
3. 以下のコマンドを実行：

```cmd
setup_venv.bat
```

このスクリプトは以下を自動実行します：
- Python環境の確認
- 仮想環境（venv）の作成
- 依存関係のインストール

#### 2. アプリケーションの起動

セットアップ完了後、以下のコマンドで起動：

```cmd
start_isop_venv.bat
```

### Linux/Mac環境

#### 1. 初回セットアップ

1. ターミナルを開く
2. ISOPのフォルダに移動
3. 以下のコマンドを実行：

```bash
chmod +x setup_venv.sh
./setup_venv.sh
```

#### 2. アプリケーションの起動

セットアップ完了後、以下のコマンドで起動：

```bash
chmod +x start_isop_venv.sh
./start_isop_venv.sh
```

## 仮想環境の利点

### 1. ライブラリの分離
- システムのPython環境に影響を与えない
- 他のプロジェクトとのライブラリ競合を回避
- バージョン固定による安定性

### 2. 再現可能な環境
- 同じバージョンのライブラリで常に動作
- チーム開発での環境統一
- デプロイ時の環境再現

### 3. 簡単な管理
- 環境の削除・再作成が容易
- 依存関係の明確化
- トラブルシューティングの簡素化

## トラブルシューティング

### よくある問題

#### 1. 仮想環境が見つからない
**症状**: "仮想環境が見つかりません"と表示される
**解決方法**:
```cmd
# Windows
setup_venv.bat

# Linux/Mac
./setup_venv.sh
```

#### 2. 権限エラー
**症状**: ファイルの実行権限がない
**解決方法**:
```bash
# Linux/Mac
chmod +x setup_venv.sh
chmod +x start_isop_venv.sh
```

#### 3. Pythonが見つからない
**症状**: "Pythonがインストールされていません"
**解決方法**:
1. Python 3.11以上をインストール
2. PATH環境変数にPythonを追加
3. セットアップスクリプトを再実行

#### 4. 依存関係のインストールエラー
**症状**: "依存関係のインストールに失敗しました"
**解決方法**:
1. インターネット接続を確認
2. pipを最新版に更新
3. 仮想環境を削除して再作成

### 仮想環境の再作成

問題が解決しない場合は、仮想環境を削除して再作成してください：

#### Windows
```cmd
rmdir /s /q venv
setup_venv.bat
```

#### Linux/Mac
```bash
rm -rf venv
./setup_venv.sh
```

## 環境変数の設定

### .envファイルの作成

プロジェクトルートに`.env`ファイルを作成：

```
OPENAI_API_KEY=your_openai_api_key_here
CHROMA_DB_PATH=./chroma_db
```

### 環境変数の直接設定

#### Windows
```cmd
set OPENAI_API_KEY=your_openai_api_key_here
```

#### Linux/Mac
```bash
export OPENAI_API_KEY=your_openai_api_key_here
```

## ファイル構成

```
ISOP-main/
├── setup_venv.bat          # Windows用セットアップ
├── setup_venv.sh           # Linux/Mac用セットアップ
├── start_isop_venv.bat     # Windows用起動
├── start_isop_venv.sh      # Linux/Mac用起動
├── venv/                   # 仮想環境（セットアップ後作成）
├── requirements.txt         # 依存関係（バージョン固定）
└── 仮想環境セットアップガイド.md  # このファイル
```

## 注意事項

1. **仮想環境の削除**: `venv`フォルダを削除すると仮想環境が失われます
2. **バージョン固定**: `requirements.txt`でライブラリのバージョンが固定されています
3. **環境変数**: 仮想環境内でも環境変数は引き継がれます
4. **更新**: ライブラリの更新が必要な場合は、仮想環境を再作成してください

## サポート

問題が発生した場合は、以下を確認してください：

1. Python 3.11以上がインストールされているか
2. 管理者権限でコマンドを実行しているか
3. インターネット接続が正常か
4. ディスク容量が十分か

詳細なログは、アプリケーション起動時に表示されます。
